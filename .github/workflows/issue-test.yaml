name: Yearly expenses reminder
on:
  workflow_dispatch:
  schedule:
    - cron: 15 17 23 * *

jobs:
  create_issue:
    name: Create reminder issue
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create reminder issue
        run: |
            gh issue create \
            --title "$TITLE" \
            --body "$BODY"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GH_REPO: ${{ github.repository }}
          TITLE: New financial year - handbook update checklist
          BODY: |
            ### New financial year - handbook update checklist:

            - [ ] Create new FY directory in HoRSE/Finances
            - [ ] Create new expenses spreadsheet
            - [ ] Update `expenses.qmd` to use the new urls for the spreadsheet and FY directory
            - [ ] Protect prevous years sheet (and warn user if modifiying?)

          PINNED: false
          CLOSE_PREVIOUS: false
